<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DRFMedia</title>
  <!-- [CSS and style preserved here] -->
</head>
<body>
  <!-- [HTML structure remains unchanged] -->

  <!-- [All buttons, inputs, forms, and divs remain the same] -->

  <script type="module">
    // [Firebase and other imports remain unchanged]

    // FIX: Add preload and fallback poster to improve video loading
    function createMediaElement(type, url) {
      if (type === 'image') {
        return `<img src="${url}" alt="Post image" loading="lazy" />`;
      } else if (type === 'video') {
        return `<video controls preload="metadata" poster="https://via.placeholder.com/640x360?text=Loading+Video">
                  <source src="${url}" type="video/mp4">
                  Your browser does not support the video tag.
                </video>`;
      } else {
        return `<p>Unsupported media type.</p>`;
      }
    }

    // In loadPosts(), replace this line:
    // const media = post.type === 'image' ? `<img src="${post.fileUrl}" alt="Post image"/>` : `<video controls src="${post.fileUrl}"></video>`;
    // WITH:
    // const media = createMediaElement(post.type, post.fileUrl);

    // [Everything else remains the same. Ensure "loadPosts()" uses createMediaElement() to render videos better.]
  </script>
</body>
</html>
