<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DRFMedia Timeline ‚Äî Spread Kindness & Truth</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Your original styles remain unchanged */
    .gift-buttons {
      margin-top: 10px;
    }
    .gift-buttons button {
      margin-right: 8px;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      background-color: #ffc107;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    .gift-buttons button:hover {
      background-color: #e0a800;
    }
  </style>
</head>
<body>

<!-- Header and other original sections stay the same -->
<!-- ... -->

<div id="postContainer" aria-live="polite"></div>

<script type="module">
// Your original Firebase and auth script stays unchanged above this
// Inside your renderPosts() function, modify the card HTML as follows:

// Replace renderPosts function with this updated one
function renderPosts() {
  const filter = searchInput.value.trim().toLowerCase();
  postContainer.innerHTML = "";
  for (const post of allPosts) {
    if (!post.caption.toLowerCase().includes(filter)) continue;

    const url1 = "https://gateway.pinata.cloud/ipfs/" + post.ipfsHash;
    const url2 = "https://cloudflare-ipfs.com/ipfs/" + post.ipfsHash;

    const isBoosted = currentUser && post.boostedBy && post.boostedBy[currentUser.uid];
    const isLiked = currentUser && post.likesBy && post.likesBy[currentUser.uid];

    const dateStr = new Date(post.timestamp).toLocaleString();

    const mediaHTML = post.mediaType === "video"
      ? `<video src="${url1}" controls playsinline preload="metadata" poster="${url2}" loading="lazy"></video>`
      : `<img src="${url1}" alt="Post media" loading="lazy" />`;

    const likesCount = post.likesCount || 0;
    const boostsCount = post.boostsCount || 0;
    const commentsCount = post.commentsCount || 0;

    const likedClass = isLiked ? "liked" : "";
    const boostedClass = isBoosted ? "boosted" : "";

    const card = document.createElement("article");
    card.className = "post-item";
    card.innerHTML = `
      <header class="post-owner" aria-label="Post owner info">
        <img src="${post.photoURL || 'https://via.placeholder.com/40'}" alt="User avatar" class="avatar" />
        <div>
          <div>${escapeHTML(post.displayName || "Anonymous")}</div>
          <time class="post-time" datetime="${new Date(post.timestamp).toISOString()}">${dateStr}</time>
        </div>
      </header>
      <div class="post-caption">${escapeHTML(post.caption)}</div>
      <div class="post-media">${mediaHTML}</div>
      <div class="post-actions" role="group" aria-label="Post actions">
        <button class="${likedClass}" aria-pressed="${isLiked ? 'true' : 'false'}" onclick="likePost('${post.id}')">üëç Like (${likesCount})</button>
        <button onclick="commentOnPost('${post.id}')">üí¨ Comment (${commentsCount})</button>
        <button class="${boostedClass}" onclick="boostPost('${post.id}')">üöÄ Boost (${boostsCount})</button>
        <button onclick="repost('${post.id}')">üîÑ Repost</button>
      </div>
      <div class="gift-buttons">
        <button onclick="window.open('https://www.skrill.com/donate?email=digitalrufiyacoin@gmail.com&amount=1&currency=USD', '_blank')">üåπ Rose $1</button>
        <button onclick="window.open('https://www.skrill.com/donate?email=digitalrufiyacoin@gmail.com&amount=10&currency=USD', '_blank')">ü¶Å Lion $10</button>
        <button onclick="window.open('https://www.skrill.com/donate?email=digitalrufiyacoin@gmail.com&amount=20&currency=USD', '_blank')">üôè Dua $20</button>
        <button onclick="window.open('https://www.skrill.com/donate?email=digitalrufiyacoin@gmail.com&amount=30&currency=USD', '_blank')">‚≠ê Star $30</button>
      </div>
      <div id="comments-${post.id}" class="comments-list" aria-live="polite" aria-label="Comments"></div>
      <div id="comment-box-${post.id}" class="comment-box" style="display:none;">
        <textarea id="comment-input-${post.id}" rows="2" placeholder="Write a comment..."></textarea>
        <button onclick="submitComment('${post.id}')">Submit</button>
        <button onclick="cancelComment('${post.id}')">Cancel</button>
      </div>
    `;
    postContainer.appendChild(card);
    loadComments(post.id);
  }
}
</script>

</body>
</html>
