<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DRFMedia Timeline — Gift Page</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .gifts-container button {
      margin: 5px;
      padding: 8px 14px;
      background: #5A2D82;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .gifts-container {
      margin-top: 12px;
    }
  </style>
</head>
<body>

<header>
  <div class="navbar-left">
    <img src="https://ik.imagekit.io/ttbbg9ocv/ChatGPT%20Image%20Jun%202,%202025,%2001_10_55%20PM.png?updatedAt=1748874907311" alt="DRFMedia Logo" />
    <h1>DRFMedia</h1>
  </div>
  <button id="menuToggle" aria-label="Toggle menu"><span></span><span></span><span></span></button>
  <nav id="primaryNav">
    <a href="timeline.html">Timeline</a>
    <a href="profile.html">Profile</a>
    <a href="#" id="loginNavLink">Login</a>
    <a href="#" id="logoutNavLink" style="display:none;">Logout</a>
  </nav>
</header>

<div id="searchBar">
  <input type="search" id="searchInput" placeholder="Search posts..." aria-label="Search posts" />
</div>

<button id="loginBtn" style="display: block; max-width: 700px; margin: 10px auto;">Sign in with Google</button>
<button id="logoutBtn" style="display:none; max-width: 700px; margin: 10px auto;">Logout</button>

<div id="postContainer" aria-live="polite">
  <!-- Sample Post Example -->
  <article class="post-item" data-post-id="example123" data-display-name="Supporter">
    <header class="post-owner">
      <img src="https://via.placeholder.com/40" alt="User avatar" class="avatar" />
      <div>
        <div>Supporter</div>
        <time class="post-time">Just Now</time>
      </div>
    </header>
    <div class="post-caption">This is a sample post for donation feature.</div>
    <div class="post-media">
      <img src="https://via.placeholder.com/600x300" alt="Sample" loading="lazy" />
    </div>
    <div class="post-actions">
      <button>👍 Like</button>
      <button>💬 Comment</button>
      <button>🚀 Boost</button>
      <button>🔄 Repost</button>
    </div>
    <div class="gifts-container"></div>
  </article>
</div>

<script type="module">
  class SkrillGifter {
    constructor(postsContainerId) {
      this.postsContainer = document.getElementById(postsContainerId);

      this.giftOptions = [
        { label: "🌹 Rose", amountUSD: "1.00" },
        { label: "💖 Heart", amountUSD: "5.00" },
        { label: "🦁 Lion", amountUSD: "10.00" },
        { label: "🛡️ Protection", amountUSD: "15.00" },
        { label: "🙏 Dua", amountUSD: "30.00" }
      ];

      if (!this.postsContainer) {
        console.error("SkrillGifter: posts container not found.");
        return;
      }

      this.renderGiftButtonsForAllPosts();
    }

    renderGiftButtonsForAllPosts() {
      const postElements = this.postsContainer.querySelectorAll(".post-item");
      postElements.forEach(postEl => {
        const postId = postEl.dataset.postId || "unknown";
        const receiverName = postEl.dataset.displayName || "Anonymous";
        this.renderGiftButtons(postEl, receiverName);
      });
    }

    renderGiftButtons(postElement, receiverName) {
      if (!postElement) return;

      let container = postElement.querySelector(".gifts-container");
      if (!container) {
        container = document.createElement("div");
        container.className = "gifts-container";
        postElement.appendChild(container);
      }
      container.innerHTML = "";

      this.giftOptions.forEach(({ label, amountUSD }) => {
        const btn = document.createElement("a");
        const url = this.buildSkrillURL(amountUSD, receiverName);
        btn.href = url;
        btn.target = "_blank";
        btn.innerHTML = `<button>${label} $${amountUSD}</button>`;
        container.appendChild(btn);
      });
    }

    buildSkrillURL(amount, name) {
      return `https://pay.skrill.com/?pay_to=digitalrufiyacoin@gmail.com&amount=${amount}&currency=USD&detail1_description=Gift+to+${encodeURIComponent(name)}&detail1_text=Thank+you+for+spreading+truth`;
    }
  }

  new SkrillGifter('postContainer');
</script>

</body>
</html>
