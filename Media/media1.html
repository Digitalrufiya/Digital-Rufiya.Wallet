<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DRF Wallet Test</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>

<h2>Wallet Detection Test</h2>
<div>Wallet Address: <span id="walletAddress">Not connected</span></div>
<button id="connectBtn">Connect Wallet</button>

<script>
  const walletAddressEl = document.getElementById('walletAddress');
  const connectBtn = document.getElementById('connectBtn');
  
  async function connectWallet() {
    if (!window.ethereum) {
      alert('No Ethereum wallet detected. Please install MetaMask or use a compatible wallet.');
      return;
    }
    try {
      // Request account access
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
      walletAddressEl.textContent = accounts[0];
      connectBtn.disabled = true;
      connectBtn.textContent = 'Connected';
    } catch (err) {
      alert('Wallet connection rejected or failed.');
      console.error(err);
    }
  }
  
  connectBtn.addEventListener('click', connectWallet);

  // Auto-connect if wallet already authorized
  (async () => {
    if (window.ethereum) {
      try {
        const accounts = await window.ethereum.request({ method: 'eth_accounts' });
        if (accounts.length > 0) {
          walletAddressEl.textContent = accounts[0];
          connectBtn.disabled = true;
          connectBtn.textContent = 'Connected';
        }
      } catch {}
    }
  })();
</script>

</body>
</html>
