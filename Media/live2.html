<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Livepeer Test Stream</title>
</head>
<body style="font-family: Arial; padding:20px;">

  <h2>üé• Livepeer Test Stream</h2>
  <button onclick="createStream()">Create New Stream</button>

  <h3>üîë Stream Key:</h3>
  <p id="streamKey">--</p>

  <h3>‚ñ∂Ô∏è Playback URL:</h3>
  <p>
    https://lp-playback.com/hls/<span id="playbackId">--</span>/index.m3u8
  </p>

  <script>
    async function createStream() {
      const API_KEY = "86690d89-ff4d-4e5e-abeb-68c2d7582b35"; // ‚ö†Ô∏è Your API key is public here
      const response = await fetch("https://livepeer.studio/api/stream", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${API_KEY}`
        },
        body: JSON.stringify({
          name: "MyTestStream",
          profiles: [
            { name: "720p", bitrate: 2000000, fps: 30, width: 1280, height: 720 },
            { name: "480p", bitrate: 1000000, fps: 30, width: 854, height: 480 },
            { name: "360p", bitrate: 500000, fps: 30, width: 640, height: 360 }
          ]
        })
      });

      const data = await response.json();
      console.log("Stream created:", data);

      if (data.streamKey) {
        document.getElementById("streamKey").innerText = data.streamKey;
        document.getElementById("playbackId").innerText = data.playbackId;
        alert("‚úÖ Stream Created! Use the Stream Key in OBS or MUX app.");
      } else {
        alert("‚ùå Error creating stream. Check console.");
      }
    }
  </script>

</body>
</html>
