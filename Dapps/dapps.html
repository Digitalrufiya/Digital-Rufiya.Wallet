<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DRFdApps Console — Ummah Builder Suite</title>
  <style>
    :root {
      --primary: #00572f;
      --accent: #e0f2e9;
      --bg: #f9f9f9;
      --white: #ffffff;
      --text: #333;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      background: var(--primary);
      color: var(--white);
      padding: 1rem 2rem;
      font-size: 1.7rem;
      text-align: center;
      font-weight: bold;
      letter-spacing: 1px;
    }

    #app-builder {
      display: flex;
      flex-direction: row;
      padding: 1rem 2rem;
      gap: 1rem;
      flex-wrap: wrap;
    }

    #components {
      width: 270px;
      background: var(--white);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 1rem;
      flex-shrink: 0;
    }

    #components h3 {
      margin-top: 0;
      font-size: 1.2rem;
    }

    .component {
      padding: 0.6rem 1rem;
      margin: 0.5rem 0;
      background: var(--accent);
      border-radius: 6px;
      cursor: grab;
      font-weight: 500;
      user-select: none;
      transition: 0.2s ease;
    }

    .component:hover {
      background: #c2e5d6;
    }

    #canvas {
      flex-grow: 1;
      background: var(--white);
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      padding: 1.5rem;
      min-height: 400px;
    }

    .canvas-item {
      border: 2px solid var(--primary);
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 10px;
      background: #eaf7f1;
      font-size: 1rem;
      font-weight: bold;
    }

    button#exportBtn, button#saveTemplateBtn {
      margin: 1rem;
      background: var(--primary);
      color: var(--white);
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1rem;
    }

    button#exportBtn:hover, button#saveTemplateBtn:hover {
      background: #007a45;
    }

    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #777;
    }

    @media (max-width: 768px) {
      #app-builder {
        flex-direction: column;
      }
      #components {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<header>
  DRFdApps Console — Empower the Ummah with Digital Tools 🌍📱
</header>

<div id="app-builder">
  <section id="components">
    <h3>🌟 Components</h3>
    <div class="component" draggable="true" data-type="header">📰 Header</div>
    <div class="component" draggable="true" data-type="text">✍️ Text Block</div>
    <div class="component" draggable="true" data-type="image">🖼️ Image</div>
    <div class="component" draggable="true" data-type="button">🔘 Button</div>
    <div class="component" draggable="true" data-type="wallet-connect">💼 Wallet Connect</div>
    <div class="component" draggable="true" data-type="realtime-list">📡 Realtime List</div>
    <div class="component" draggable="true" data-type="product-card">🛍️ Product Card</div>
    <div class="component" draggable="true" data-type="nft-card">🎨 NFT Card</div>
    <div class="component" draggable="true" data-type="quran-widget">📖 Quran Widget</div>
    <div class="component" draggable="true" data-type="donation-block">💖 Zakat / Donation Block</div>
    <div class="component" draggable="true" data-type="course-section">🎓 Course Section (LMS)</div>
    <div class="component" draggable="true" data-type="blog-section">📚 Blog / Article Section</div>
    <div class="component" draggable="true" data-type="ai-search">🤖 AI Search Bar</div>
    <div class="component" draggable="true" data-type="map-locator">🗺️ Mosque / Business Map</div>
  </section>

  <section id="canvas" ondragover="allowDrop(event)" ondrop="drop(event)">
    <p>⬇️ Drag components here to build your DRF-powered app...</p>
  </section>
</div>

<button id="exportBtn">📤 Export as Web App</button>
<button id="saveTemplateBtn">💾 Save as Template</button>

<footer>
  Made with ❤️ for the Ummah | DRFdApps Console v1.0 | DRFchain Integration (soon) | Mobile-ready version supported
</footer>

<script>
  const components = document.querySelectorAll('.component');
  const canvas = document.getElementById('canvas');
  let dragData = null;

  components.forEach(c => {
    c.addEventListener('dragstart', e => {
      dragData = c.getAttribute('data-type');
    });
  });

  function allowDrop(e) { e.preventDefault(); }
  function drop(e) {
    e.preventDefault();
    if (!dragData) return;
    addComponentToCanvas(dragData);
  }

  function addComponentToCanvas(type) {
    if (canvas.querySelector('p')) canvas.querySelector('p').remove();

    let el = document.createElement('div');
    el.classList.add('canvas-item');
    el.setAttribute('data-type', type);

    switch(type) {
      case 'header': el.innerHTML = '<h1 contenteditable="true">My DRF App Header</h1>'; break;
      case 'text': el.innerHTML = '<p contenteditable="true">Type your message or story here...</p>'; break;
      case 'image': el.innerHTML = '<img src="https://via.placeholder.com/300x150" style="max-width:100%; border-radius:8px;">'; break;
      case 'button': el.innerHTML = '<button>Click Me</button>'; break;
      case 'wallet-connect': el.innerHTML = '<button>🔗 Connect Wallet</button>'; break;
      case 'realtime-list': el.innerHTML = '<ul><li>📡 Realtime data will show here</li></ul>'; break;
      case 'product-card': el.innerHTML = '<div><h3>🛍️ Product Name</h3><p>Description</p><strong>$9.99</strong></div>'; break;
      case 'nft-card': el.innerHTML = '<div><h4>🎨 NFT Title</h4><img src="https://via.placeholder.com/200"><button>Buy</button></div>'; break;
      case 'quran-widget': el.innerHTML = '<blockquote>"Indeed, in the remembrance of Allah do hearts find rest." (13:28)</blockquote>'; break;
      case 'donation-block': el.innerHTML = '<div><strong>💖 Donate to Gaza</strong><button>Donate DRF</button></div>'; break;
      case 'course-section': el.innerHTML = '<section><h3>🎓 Course: Intro to Tawheed</h3><p>Lesson content here...</p></section>'; break;
      case 'blog-section': el.innerHTML = '<article><h2>📚 Blog Title</h2><p>Write your post here...</p></article>'; break;
      case 'ai-search': el.innerHTML = '<input type="search" placeholder="Ask DRF AI..." />'; break;
      case 'map-locator': el.innerHTML = '<iframe src="https://maps.google.com" width="100%" height="200"></iframe>'; break;
      default: el.innerHTML = '<p>Unknown component</p>';
    }

    canvas.appendChild(el);
  }

  document.getElementById('exportBtn').addEventListener('click', () => {
    let html = '<!DOCTYPE html><html><head><title>My DRF App</title></head><body>';
    canvas.querySelectorAll('.canvas-item').forEach(item => html += item.innerHTML);
    html += '</body></html>';
    const win = window.open('', '_blank');
    win.document.write('<pre>' + html.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</pre>');
    win.document.close();
  });

  document.getElementById('saveTemplateBtn').addEventListener('click', () => {
    const template = [];
    canvas.querySelectorAll('.canvas-item').forEach(item => {
      template.push({ type: item.getAttribute('data-type'), html: item.innerHTML });
    });
    localStorage.setItem('drf_template_backup', JSON.stringify(template));
    alert('✅ Template saved locally.');
  });
</script>

</body>
</html>
