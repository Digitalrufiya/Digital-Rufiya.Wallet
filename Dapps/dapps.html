<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DRFdApps Console â€” Ummah Builder Suite</title>
  <style>
    :root {
      --primary: #00572f;
      --accent: #e0f2e9;
      --bg: #f9f9f9;
      --white: #ffffff;
      --text: #333;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      background: var(--primary);
      color: var(--white);
      padding: 1rem 2rem;
      font-size: 1.7rem;
      text-align: center;
      font-weight: bold;
      letter-spacing: 1px;
    }

    #app-builder {
      display: flex;
      flex-direction: row;
      padding: 1rem 2rem;
      gap: 1rem;
      flex-wrap: wrap;
    }

    #components {
      width: 270px;
      background: var(--white);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 1rem;
      flex-shrink: 0;
    }

    #components h3 {
      margin-top: 0;
      font-size: 1.2rem;
    }

    .component {
      padding: 0.6rem 1rem;
      margin: 0.5rem 0;
      background: var(--accent);
      border-radius: 6px;
      cursor: grab;
      font-weight: 500;
      user-select: none;
      transition: 0.2s ease;
    }

    .component:hover {
      background: #c2e5d6;
    }

    #canvas {
      flex-grow: 1;
      background: var(--white);
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      padding: 1.5rem;
      min-height: 400px;
    }

    .canvas-item {
      border: 2px solid var(--primary);
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 10px;
      background: #eaf7f1;
      font-size: 1rem;
      font-weight: bold;
    }

    button#exportBtn, button#saveTemplateBtn {
      margin: 1rem;
      background: var(--primary);
      color: var(--white);
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1rem;
    }

    button#exportBtn:hover, button#saveTemplateBtn:hover {
      background: #007a45;
    }

    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #777;
    }

    @media (max-width: 768px) {
      #app-builder {
        flex-direction: column;
      }
      #components {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<header>
  DRFdApps Console â€” Empower the Ummah with Digital Tools ğŸŒğŸ“±
</header>

<div id="app-builder">
  <section id="components">
    <h3>ğŸŒŸ Components</h3>
    <div class="component" draggable="true" data-type="header">ğŸ“° Header</div>
    <div class="component" draggable="true" data-type="text">âœï¸ Text Block</div>
    <div class="component" draggable="true" data-type="image">ğŸ–¼ï¸ Image</div>
    <div class="component" draggable="true" data-type="button">ğŸ”˜ Button</div>
    <div class="component" draggable="true" data-type="wallet-connect">ğŸ’¼ Wallet Connect</div>
    <div class="component" draggable="true" data-type="realtime-list">ğŸ“¡ Realtime List</div>
    <div class="component" draggable="true" data-type="product-card">ğŸ›ï¸ Product Card</div>
    <div class="component" draggable="true" data-type="nft-card">ğŸ¨ NFT Card</div>
    <div class="component" draggable="true" data-type="quran-widget">ğŸ“– Quran Widget</div>
    <div class="component" draggable="true" data-type="donation-block">ğŸ’– Zakat / Donation Block</div>
    <div class="component" draggable="true" data-type="course-section">ğŸ“ Course Section (LMS)</div>
    <div class="component" draggable="true" data-type="blog-section">ğŸ“š Blog / Article Section</div>
    <div class="component" draggable="true" data-type="ai-search">ğŸ¤– AI Search Bar</div>
    <div class="component" draggable="true" data-type="map-locator">ğŸ—ºï¸ Mosque / Business Map</div>
  </section>

  <section id="canvas" ondragover="allowDrop(event)" ondrop="drop(event)">
    <p>â¬‡ï¸ Drag components here to build your DRF-powered app...</p>
  </section>
</div>

<button id="exportBtn">ğŸ“¤ Export as Web App</button>
<button id="saveTemplateBtn">ğŸ’¾ Save as Template</button>

<footer>
  Made with â¤ï¸ for the Ummah | DRFdApps Console v1.0 | DRFchain Integration (soon) | Mobile-ready version supported
</footer>

<script>
  const components = document.querySelectorAll('.component');
  const canvas = document.getElementById('canvas');
  let dragData = null;

  components.forEach(c => {
    c.addEventListener('dragstart', e => {
      dragData = c.getAttribute('data-type');
    });
  });

  function allowDrop(e) { e.preventDefault(); }

  function drop(e) {
    e.preventDefault();
    if (!dragData) return;
    addComponentToCanvas(dragData);
  }

  function addComponentToCanvas(type) {
    if (canvas.querySelector('p')) canvas.querySelector('p').remove();

    let el = document.createElement('div');
    el.classList.add('canvas-item');
    el.setAttribute('data-type', type);

    switch(type) {
      case 'header':
        el.innerHTML = `<!-- <header> -->\n<header style="background:#00572f;color:white;padding:1.5rem 2rem;font-size:1.8rem;font-weight:bold;letter-spacing:1.2px;border-radius:10px;user-select:none;">DRFdApps Console â€” Empower the Ummah with Digital Tools ğŸŒğŸ“±</header>\n<!-- </header> -->`;
        break;
      case 'text':
        el.innerHTML = `<!-- <text> -->\n<p contenteditable="true">Type your message or story here...</p>\n<!-- </text> -->`;
        break;
      case 'image':
        el.innerHTML = `<!-- <image> -->\n<img src="https://via.placeholder.com/300x150" style="max-width:100%; border-radius:8px;">\n<!-- </image> -->`;
        break;
      case 'button':
        el.innerHTML = `<!-- <button> -->\n<button>Click Me</button>\n<!-- </button> -->`;
        break;
      case 'wallet-connect':
        el.innerHTML = `<!-- <wallet-connect> -->\n<button>ğŸ”— Connect Wallet</button>\n<!-- </wallet-connect> -->`;
        break;
      case 'realtime-list':
        el.innerHTML = `<!-- <realtime-list> -->\n<ul><li>ğŸ“¡ Realtime data will show here</li></ul>\n<!-- </realtime-list> -->`;
        break;
      case 'product-card':
        el.innerHTML = `<!-- <product-card> -->\n<div><h3>ğŸ›ï¸ Product Name</h3><p>Description</p><strong>$9.99</strong></div>\n<!-- </product-card> -->`;
        break;
      case 'nft-card':
        el.innerHTML = `<!-- <nft-card> -->\n<div><h4>ğŸ¨ NFT Title</h4><img src="https://via.placeholder.com/200"><button>Buy</button></div>\n<!-- </nft-card> -->`;
        break;
      case 'quran-widget':
        el.innerHTML = `<!-- <quran-widget> -->\n<blockquote>"Indeed, in the remembrance of Allah do hearts find rest." (13:28)</blockquote>\n<!-- </quran-widget> -->`;
        break;
      case 'donation-block':
        el.innerHTML = `<!-- <donation-block> -->\n<div><strong>ğŸ’– Donate to Gaza</strong><button>Donate DRF</button></div>\n<!-- </donation-block> -->`;
        break;
      case 'course-section':
        el.innerHTML = `<!-- <course-section> -->\n<section><h3>ğŸ“ Course: Intro to Tawheed</h3><p>Lesson content here...</p></section>\n<!-- </course-section> -->`;
        break;
      case 'blog-section':
        el.innerHTML = `<!-- <blog-section> -->\n<article><h2>ğŸ“š Blog Title</h2><p>Write your post here...</p></article>\n<!-- </blog-section> -->`;
        break;
      case 'ai-search':
        el.innerHTML = `<!-- <ai-search> -->\n<input type="search" placeholder="Ask DRF AI..." />\n<!-- </ai-search> -->`;
        break;
      case 'map-locator':
        el.innerHTML = `<!-- <map-locator> -->\n<iframe src="https://maps.google.com" width="100%" height="200"></iframe>\n<!-- </map-locator> -->`;
        break;
      default:
        el.innerHTML = '<p>Unknown component</p>';
    }

    canvas.appendChild(el);
  }

  document.getElementById('exportBtn').addEventListener('click', () => {
    let html = '<!DOCTYPE html><html><head><title>My DRF App</title></head><body>';
    canvas.querySelectorAll('.canvas-item').forEach(item => html += item.innerHTML);
    html += '</body></html>';
    const win = window.open('', '_blank');
    win.document.write('<pre>' + html.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</pre>');
    win.document.close();
  });

  document.getElementById('saveTemplateBtn').addEventListener('click', () => {
    const template = [];
    canvas.querySelectorAll('.canvas-item').forEach(item => {
      template.push({ type: item.getAttribute('data-type'), html: item.innerHTML });
    });
    localStorage.setItem('drf_template_backup', JSON.stringify(template));
    alert('âœ… Template saved locally.');
  });
</script>

</body>
</html>
