<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FENTOM Hybrid Engine 3D</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: radial-gradient(circle at center, #000010, #020213);
      color: white;
      font-family: Arial, sans-serif;
    }

    #ui {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.6);
      padding: 15px;
      border-radius: 12px;
      font-size: 14px;
      line-height: 1.6;
    }

    label { display: block; margin-top: 5px; }
  </style>
</head>
<body>
  <div id="ui">
    <h3>⚙️ FENTOM Hybrid Engine</h3>
    <label>RPM: <input type="range" id="rpm" min="100" max="5000" value="1200"></label>
    <label>Coil Power: <input type="range" id="coil" min="0" max="100" value="50"></label>
    <label>Clutch Gap: <input type="range" id="gap" min="0" max="10" step="0.1" value="3"></label>
    <button id="start">Start</button>
    <button id="stop">Stop</button>
    <p id="status">Stopped</p>
  </div>

  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/controls/OrbitControls.js';

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(4, 3, 5);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    document.body.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    // Lighting
    const light = new THREE.PointLight(0xffffff, 1.4);
    light.position.set(5, 5, 5);
    scene.add(light);

    const ambient = new THREE.AmbientLight(0x404040, 1.5);
    scene.add(ambient);

    // Ground plane
    const planeGeo = new THREE.PlaneGeometry(20, 20);
    const planeMat = new THREE.MeshStandardMaterial({ color: 0x111111, metalness: 0.3, roughness: 0.7 });
    const plane = new THREE.Mesh(planeGeo, planeMat);
    plane.rotation.x = -Math.PI / 2;
    scene.add(plane);

    // Flywheel (main hybrid rotor)
    const wheelGeo = new THREE.TorusGeometry(1.5, 0.2, 16, 100);
    const wheelMat = new THREE.MeshStandardMaterial({ color: 0x00ffff, metalness: 1, roughness: 0.2, emissive: 0x004040 });
    const flywheel = new THREE.Mesh(wheelGeo, wheelMat);
    scene.add(flywheel);

    // Shaft
    const shaftGeo = new THREE.CylinderGeometry(0.1, 0.1, 2.5);
    const shaftMat = new THREE.MeshStandardMaterial({ color: 0x888888, metalness: 0.8, roughness: 0.3 });
    const shaft = new THREE.Mesh(shaftGeo, shaftMat);
    shaft.rotation.z = Math.PI / 2;
    scene.add(shaft);

    // Magnetic coil assembly
    const coilGeo = new THREE.TorusGeometry(0.3, 0.08, 16, 50);
    const coilMat = new THREE.MeshStandardMaterial({ color: 0xff4400, emissive: 0x220000 });
    const coil1 = new THREE.Mesh(coilGeo, coilMat);
    coil1.position.set(2, 0, 0);
    const coil2 = coil1.clone();
    coil2.position.set(-2, 0, 0);
    scene.add(coil1, coil2);

    // Core
    const coreGeo = new THREE.SphereGeometry(0.25, 32, 32);
    const coreMat = new THREE.MeshStandardMaterial({ color: 0x00ff44, emissive: 0x003300 });
    const core = new THREE.Mesh(coreGeo, coreMat);
    scene.add(core);

    let rotationSpeed = 0;
    let running = false;

    function updateControls() {
      const rpm = document.getElementById('rpm').value;
      const coil = document.getElementById('coil').value;
      const gap = document.getElementById('gap').value;

      rotationSpeed = (rpm / 60) * 0.02;
      const glow = coil / 100;
      coilMat.emissiveIntensity = glow;
      flywheel.material.emissiveIntensity = glow;
      core.material.emissiveIntensity = 0.5 + glow / 2;
    }

    document.getElementById('start').onclick = () => {
      running = true;
      document.getElementById('status').innerText = "Running...";
    };
    document.getElementById('stop').onclick = () => {
      running = false;
      document.getElementById('status').innerText = "Stopped";
    };

    function animate() {
      requestAnimationFrame(animate);
      if (running) flywheel.rotation.y += rotationSpeed;
      controls.update();
      renderer.render(scene, camera);
    }

    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    document.querySelectorAll('input').forEach(i => i.addEventListener('input', updateControls));
    updateControls();
  </script>
</body>
</html>
